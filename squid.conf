# Define HTTP port for the proxy server
http_port 3128

# Disable caching (important for bypass purposes)
cache deny all

# Disable forwarding headers for anonymity
forwarded_for off
request_header_access Via deny all
request_header_access X-Forwarded-For deny all
request_header_access Cache-Control deny all

# Explicitly add CORS headers in the response
reply_header_add Access-Control-Allow-Origin *
reply_header_add Access-Control-Allow-Methods GET
reply_header_add Access-Control-Allow-Headers *
reply_header_add Access-Control-Expose-Headers *

# Allow HTTP methods
acl allowed_methods method GET
http_access allow allowed_methods

# Allow requests from all IPs (optional: restrict this if needed)
acl all src 0.0.0.0/0
http_access allow all

# Restrict Squid to deny caching
cache_mem 0 MB
maximum_object_size_in_memory 0 KB
cache_dir null /tmp
access_log none

# Set DNS resolver
dns_nameservers 8.8.8.8 8.8.4.4

# Increase file descriptor limits for better performance
max_filedescriptors 4096

# Optimize settings for handling high traffic
# Increase connection limits
tcp_recv_bufsize 256 KB
max_open_disk_fds 0
cache_replacement_policy heap LFUDA
memory_replacement_policy heap GDSF

# Tune timeout values for performance
pconn_timeout 120 seconds
client_idle_pconn_timeout 60 seconds
half_closed_clients off
request_timeout 30 seconds

# Optimize concurrency and thread pooling
workers 4